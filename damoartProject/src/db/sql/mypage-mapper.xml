<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE properties SYSTEM "http://java.sun.com/dtd/properties.dtd">
<properties>

	<!-- 예매 내역 -->
	<entry key="selectReserve">
		SELECT 
		       MEM_NO
		     , ORDER_NO
		     , FINAL_PRICE
		     , ORDER_DATE
		     , PNO
		     , TITLE
		     , MAIN_IMG
		     , ORDER_OPT
		     , ORDER_COUNT
		     , ORDER_STATUS
		  FROM "ORDER" 
		  JOIN ORDER_P USING(ORDER_NO)
		  JOIN PRODUCT USING(PNO)
		 WHERE MEM_NO = ?
		 ORDER
    		BY ORDER_DATE DESC
	</entry>
	
	<entry key="selectReserveDetail">
		SELECT 
		       ORDER_NO 
		     , ORDER_DATE 
		     , ORDER_NAME
		     , PNO
		     , TITLE
		     , MAIN_IMG
		     , ORDER_OPT
		     , ORDER_COUNT
		     , AREA
		     , PAY_DATE
		     , PAY_OPT
		     , PAY_PRICE
		     , ORDER_PHONE
		  FROM "ORDER" 
		  JOIN ORDER_P USING(ORDER_NO)
		  JOIN PRODUCT USING(PNO)
		  JOIN PAY USING(ORDER_NO)
		 WHERE MEM_NO = ?
		 ORDER
		    BY ORDER_DATE DESC
	</entry>

	<!-- 적립금 내역 -->
	<entry key="pointList">
		SELECT
		       POI_DATE
		     , POI_POINT
		     , POI_CONTENT
		     , ORDER_NO
		     , MEM_ID
		  FROM POINT
		  JOIN MEMBER USING(MEM_NO) 
		 WHERE MEM_ID = ?
	</entry>
	
	<!-- 회원 적립금 -->
	<entry key="memberPoint">
		SELECT 
		       SUM(POI_POINT) POINT
		  FROM POINT 
		  JOIN MEMBER USING(MEM_NO)
		 WHERE MEM_ID = ?
	</entry>
	
	<!-- qna 내역 -->
	<entry key="memberQnaList">
		SELECT
		       Q_NO
		     , TITLE
		     , Q_WRITER
		     , SECRET
		     , Q_TITLE
		     , Q_CONTENT
		     , TO_CHAR(CREATE_DATE, 'YYYY-MM-DD') "CREATE_DATE"
		     , Q_CATEGORY_CODE
		     , A_CONTENT
		     , A_CREATE_DATE
		     , NICKNAME
		  FROM QNA
		  LEFT JOIN PRODUCT USING (PNO)
		  LEFT JOIN MEMBER M ON (MEM_NO2 = M.MEM_NO)
		 WHERE Q_WRITER = ?
	</entry>

	<!-- 회원정보 수정 -->
	<entry key="updateMember">
		UPDATE MEMBER
		   SET MEM_PWD = ?
		   	 , MEM_NAME = ?
		     , NICKNAME = ?
		     , EMAIL = ?
		     , PHONE = ?
		     , BIRTH = ?
		 WHERE MEM_ID = ? 
	</entry>

	<!-- 회원정보 조회 -->
	<entry key="selectMember">
		SELECT 
		       MEM_NO
		     , MEM_ID
		     , MEM_PWD
		     , MEM_NAME
		     , NICKNAME
		     , EMAIL
		     , PHONE
		     , BIRTH
		     , ENROLL_DATE
		     , MEM_TYPE
		     , STATUS
		     , BLACK_CONTENT
		     , BLACK_DATE
		  FROM MEMBER
		 WHERE MEM_ID = ?
		   AND STATUS = 'N'
	</entry>
	
	<!-- 회원탈퇴(상태변경) -->
	<entry key="deleteMember">
		UPDATE MEMBER
		   SET STATUS = 'Y'
	   	 WHERE MEM_ID = ?
	</entry>

</properties>